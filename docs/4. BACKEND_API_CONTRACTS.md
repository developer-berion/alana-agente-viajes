# BACKEND_API_CONTRACTS.md

## General Information
- **Base URL (Public):** `https://travel-mind-prod-awpc74oijq-uc.a.run.app`
- **Base URL (Internal):** `http://127.0.0.1:8000`
- **Format:** JSON

## Endpoints

### 1. Health Check
`GET /health`
- **Response:** `200 OK`
- **Body:** `{"status": "ok"}`

### 2. Get Session History
`GET /sessions/{session_id}`
- **Response:** `200 OK`
- **Body:**
```json
{
  "session_id": "uuid",
  "messages": [
    {
      "role": "user",
      "content": "trip to Turkey",
      "timestamp": "iso8601"
    }
  ]
}
```

### 3. Send Message
`POST /messages`
- **Headers:** `X-Idempotency-Key: <unique-uuid>`
- **Request Body:**
```json
{
  "session_id": "uuid",
  "message": "promotions for Turkey"
}
```
- **Response:** `200 OK`
- **Body:**
```json
{
  "response": "itinerary text...",
  "citations": ["gs://...", "gs://..."],
  "session_id": "uuid"
}
```
vias en el sidebar MUST usar paginaci√≥n por cursor.



Validaciones: Validar payloads con Zod/Pydantic; prohibido el uso de Any.