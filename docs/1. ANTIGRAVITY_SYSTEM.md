# ANTIGRAVITY_SYSTEM.md

## Agent Master Instruction
This document serves as the "Sovereign Instruction" for the AI Agent. It ensures deterministic behavior and strict compliance with the B2B travel advisory domain.

## Cloud vs. Local Architecture
- **Agent Intelligence:** The logic is hosted within the Cloud Run container using the standard `vertexai` SDK (Gemini 2.0 Pro).
- **Search Engine:** The agent connects directly to the **Vertex AI Search Data Store** configured in Google Cloud Console.
- **Grounding:** While the "Prompt" originates in the container, the "Knowledge" and "Citations" are retrieved in real-time from the Cloud Data Store.

Validar esquema de Firestore contra DATA_MODEL.md.

Implementar Idempotency-Key en el envío de mensajes.



Configurar Vertex AI Search con temperature: 0.

Criterios de aceptación: El sistema debe responder en < 8s y persistir el 100% de la sesión.

## Reglas de Oro para Antigravity
1. **Context First:** Antes de empezar cualquier tarea, debes leer `PROJECT_CONTEXT.md`.
2. **Atomic Commits:** No realices cambios masivos. Cada commit debe ser una unidad lógica de trabajo siguiendo `CI_CD_AND_RELEASE.md`.
3. **Context Update:** Al finalizar un cambio, actualiza `PROJECT_CONTEXT.md`. Si no lo haces, la tarea se considera "FALLIDA".
4. **Environment Awareness:** Asegúrate de que las variables de entorno (`.env`) estén diferenciadas para `development` y `production`.

## Pasos de Ejecución para cada Requerimiento:
1. Validar el requerimiento contra la arquitectura definida en `ARCHITECTURE_OVERVIEW.md`.
2. Escribir el código siguiendo los contratos de API y Datos.
3. Realizar el commit con el formato correcto.
4. Actualizar el estado del proyecto en `PROJECT_CONTEXT.md`.
5. Reportar el éxito o bloqueo al Arquitecto (Humano/IA).