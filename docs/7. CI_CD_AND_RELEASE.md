Objetivo: Garantizar despliegues seguros y sin tiempo de inactividad.

Reglas técnicas obligatorias:


Trunk-Based Development: Integraciones diarias a main protegidas por tests.




SLSA Nivel 3: El pipeline de Cloud Build MUST generar procedencia firmada del contenedor.




Canary Deployment: El despliegue en Cloud Run se hará al 5% inicial, monitoreando la tasa de error 5xx.



Pasos de Rollback: Reversión automática si la latencia del P99 supera los 8s durante el canario.

## Estrategia de Branching y Commits
- **Rama Principal:** `main` (Producción).
- **Rama de Desarrollo:** `develop` (Pruebas).
- **Commits Lógicos:** Se exige el estándar **Conventional Commits**.
  - Formato: `<tipo>(<alcance>): <descripción corta>`
  - Tipos: `feat`, `fix`, `docs`, `refactor`, `perf`, `chore`.
  - Ejemplo: `feat(api): add firestore persistence for chat sessions`.

## Gestión de Ambientes (GCP)
1. **Ambiente de Prueba (Testing):**
   - Trigger: Push a la rama `develop`.
   - Servicio: Cloud Run (Tag: `test`).
   - Firestore: Database `(default)` en proyecto de sandbox.
2. **Ambiente de Producción:**
   - Trigger: Release tag o merge a `main`.
   - Servicio: Cloud Run (Producción).
   - Firestore: Database dedicada con reglas de seguridad estrictas.

## Reglas Técnicas Obligatorias
- **No Direct Push:** Prohibido pushear directamente a `main`. Todo cambio pasa por PR.
- **Rollback:** Si el Health Check de Cloud Run falla en el despliegue, la revisión debe revertirse automáticamente